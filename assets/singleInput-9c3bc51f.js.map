{"version":3,"file":"singleInput-9c3bc51f.js","sources":["../../../../packages/date-picker/src/input/singleInput.tsx"],"sourcesContent":["import {\n  forwardRef,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n  KeyboardEvent,\n  useCallback,\n} from \"react\"\nimport { ClearIcon } from \"@illa-design/icon\"\nimport { omit } from \"@illa-design/system\"\nimport { DateInputHandler, DateInputProps } from \"./interface\"\nimport {\n  applyInputWrapperStyle,\n  applyPrefixStyle,\n  applyRealInputStyle,\n  baseSuffixStyle,\n  clearIconStyle,\n  inputStyle,\n  suffixIconStyle,\n} from \"./style\"\n\nexport const DateInput = forwardRef<DateInputHandler, DateInputProps>(\n  (props, ref) => {\n    const {\n      style,\n      className,\n      prefixCls: propPrefixCls,\n      allowClear,\n      error,\n      disabled,\n      placeholder,\n      format,\n      size = \"medium\",\n      onClear,\n      editable,\n      value,\n      inputValue,\n      onPressEnter,\n      suffixIcon,\n      prefix,\n      onChange,\n      popupVisible,\n      isPlaceholder,\n      colorScheme = \"blue\",\n      ...rest\n    } = props\n\n    const readOnlyProps = editable ? {} : { readOnly: true }\n\n    const inputRef = useRef<HTMLInputElement>(null)\n\n    useImperativeHandle(ref, () => ({\n      focus: () => {\n        inputRef.current?.focus?.()\n      },\n      blur: () => {\n        inputRef.current?.blur?.()\n      },\n    }))\n\n    const showValue = useMemo(() => {\n      if (inputValue !== undefined) {\n        return inputValue\n      } else if (value && !Array.isArray(value)) {\n        return typeof format === \"function\"\n          ? format(value)\n          : value.format(format)\n      }\n      return \"\"\n    }, [format, inputValue, value])\n\n    const onKeyDown = useCallback(\n      (e: KeyboardEvent<HTMLInputElement>) => {\n        const keyCode = e.code\n        if (keyCode === \"Enter\") {\n          onPressEnter?.()\n        }\n      },\n      [onPressEnter],\n    )\n\n    return (\n      <div\n        {...omit(rest, [\"onChange\", \"onPressEnter\"])}\n        css={applyInputWrapperStyle(\n          size,\n          colorScheme,\n          disabled,\n          error,\n          allowClear && !!showValue,\n        )}\n      >\n        {prefix && <div css={applyPrefixStyle(size)}>{prefix}</div>}\n        <div css={inputStyle}>\n          <input\n            ref={inputRef}\n            disabled={disabled}\n            placeholder={placeholder}\n            value={showValue}\n            onKeyDown={onKeyDown}\n            onChange={onChange}\n            {...readOnlyProps}\n            css={applyRealInputStyle(size)}\n          />\n        </div>\n        <div css={baseSuffixStyle}>\n          {allowClear && showValue && (\n            <span onClick={onClear} css={clearIconStyle} className=\"clear-icon\">\n              <ClearIcon />\n            </span>\n          )}\n          <span className=\"suffix-icon\" css={suffixIconStyle(disabled)}>\n            {suffixIcon}\n          </span>\n        </div>\n      </div>\n    )\n  },\n)\n\nDateInput.displayName = \"DateInput\"\n"],"names":["DateInput","forwardRef","props","ref","style","className","propPrefixCls","allowClear","error","disabled","placeholder","format","size","onClear","editable","value","inputValue","onPressEnter","suffixIcon","prefix","onChange","popupVisible","isPlaceholder","colorScheme","rest","readOnlyProps","inputRef","useRef","useImperativeHandle","_b","_a","showValue","useMemo","onKeyDown","useCallback","jsxs","omit","applyInputWrapperStyle","jsx","applyPrefixStyle","inputStyle","applyRealInputStyle","baseSuffixStyle","clearIconStyle","ClearIcon","suffixIconStyle"],"mappings":"wSAqBO,MAAAA,EAAAC,EAAA,WAAkB,CAAAC,EAAAC,IAAA,CAErB,KAAA,CAAM,MAAAC,EACJ,UAAAC,EACA,UAAAC,EACW,WAAAC,EACX,MAAAC,EACA,SAAAC,EACA,YAAAC,EACA,OAAAC,EACA,KAAAC,EAAA,SACO,QAAAC,EACP,SAAAC,EACA,MAAAC,EACA,WAAAC,EACA,aAAAC,EACA,WAAAC,EACA,OAAAC,EACA,SAAAC,EACA,aAAAC,EACA,cAAAC,EACA,YAAAC,EAAA,OACc,GAAAC,CACX,EAAAtB,EAGLuB,EAAAX,EAAA,CAAA,EAAA,CAAA,SAAA,EAAA,EAEAY,EAAAC,SAAA,IAAA,EAEAC,EAAA,oBAAAzB,EAAA,KAAA,CAAgC,MAAA,IAAA,UAE5B0B,GAAAC,EAAAJ,EAAA,UAAA,YAAAI,EAAA,QAAA,MAAAD,EAAA,KAAAC,EAA0B,EAC5B,KAAA,IAAA,UAEED,GAAAC,EAAAJ,EAAA,UAAA,YAAAI,EAAA,OAAA,MAAAD,EAAA,KAAAC,EAAyB,CAC3B,EAAA,EAGF,MAAAC,EAAAC,EAAAA,QAAA,IACEhB,IAAA,OACEA,EAAOD,GAAA,CAAA,MAAA,QAAAA,CAAA,EAEP,OAAAJ,GAAA,WAAAA,EAAAI,CAAA,EAAAA,EAAA,OAAAJ,CAAA,EAIF,GAAO,CAAAA,EAAAK,EAAAD,CAAA,CAAA,EAGTkB,EAAAC,EAAA,YAAkB,GAAA,CAEd,EAAA,OACA,UACEjB,GAAA,MAAAA,IACF,EACF,CAAAA,CAAA,CACa,EAGf,OAAAkB,EACE,MAAC,CAAA,GAAAC,EAAAZ,EAAA,CAAA,WAAA,cAAA,CAAA,EAC4C,IAAAa,EACtCzB,EACHW,EACAd,EACAD,EACAD,GAAA,CAAA,CAAAwB,CACgB,EAClB,SAAA,CAECZ,GAAAmB,EAAA,MAAA,CAAA,IAAAC,EAAA3B,CAAA,EAAA,SAAAO,EAAA,EAAoDmB,EAAA,MAAA,CAAA,IAAAE,EAAA,SAAAF,EAEnD,QAAC,CAAA,IAAAZ,EACM,SAAAjB,EACL,YAAAC,EACA,MAAAqB,EACO,UAAAE,EACP,SAAAb,EACA,GAAAK,EACI,IAAAgB,EAAA7B,CAAA,CACyB,CAAA,EAAA,EAEjCuB,EAAA,MAAA,CAAA,IAAAO,EAAA,SAAA,CAEGnC,GAAAwB,GAAAO,EAAA,OAAA,CAAA,QAAAzB,EAAA,IAAA8B,EAAA,UAAA,aAAA,SAAAL,EAAAM,EAAA,CAAA,CAAA,EAAA,EAGCN,EAAA,OAAA,CAAA,UAAA,cAAA,IAAAO,EAAApC,CAAA,EAAA,SAAAS,EAAA,CAIF,EAAA,CACF,CAAA,CAAA,CACF,CAGN,EAEAlB,EAAA,YAAA"}