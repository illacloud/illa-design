{"version":3,"file":"image-a6e34fb7.js","sources":["../../../../packages/image/src/style.ts","../../../../packages/image/src/image.tsx"],"sourcesContent":["import { globalColor, illaPrefix } from \"@illa-design/theme\"\nimport { css } from \"@emotion/react\"\n\nexport function applyImageCss(\n  objFit: \"fill\" | \"contain\" | \"cover\" | \"none\" | \"scale-down\",\n  radius: string,\n) {\n  return css`\n    object-fit: ${objFit};\n    border-radius: ${radius};\n  `\n}\n\nexport function applyDefaultFallback(\n  width: string | number,\n  height: string | number,\n  radius: string,\n) {\n  return css`\n    display: inline-flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    background-color: ${globalColor(`--${illaPrefix}-grayBlue-09`)};\n    border-radius: ${radius};\n    width: ${width};\n    height: ${height};\n  `\n}\n\nexport const applyOuterCss = css`\n  vertical-align: middle;\n  display: inline-flex;\n`\n","import { forwardRef, useEffect, useState } from \"react\"\nimport { ImageProps } from \"./interface\"\nimport { ImageDefaultIcon } from \"@illa-design/icon\"\nimport { applyDefaultFallback, applyImageCss, applyOuterCss } from \"./style\"\nimport {\n  applyBoxStyle,\n  deleteCssProps,\n  globalColor,\n  illaPrefix,\n} from \"@illa-design/theme\"\n\nenum ImageState {\n  Loading,\n  Loaded,\n  Error,\n}\n\nexport const Image = forwardRef<HTMLDivElement, ImageProps>((props, ref) => {\n  const {\n    // origin\n    src = \"\",\n    width = \"100px\",\n    height = \"100px\",\n    alt = \"\",\n    // custom\n    objectFit = \"cover\",\n    fallback = (\n      <ImageDefaultIcon color={globalColor(`--${illaPrefix}-blackAlpha-06`)} />\n    ),\n    fallbackSrc = \"\",\n    radius = \"4px\",\n    // img\n    crossOrigin,\n    decoding,\n    loading,\n    referrerPolicy,\n    sizes,\n    srcSet,\n    useMap,\n    draggable = true,\n    ...rest\n  } = props\n\n  const [imageState, setImageState] = useState<ImageState>()\n\n  useEffect(() => {\n    setImageState(ImageState.Loading)\n  }, [src])\n\n  return (\n    <div\n      css={[applyOuterCss, applyBoxStyle(props)]}\n      ref={ref}\n      {...deleteCssProps(rest)}\n    >\n      {src && src.length != 0 && imageState != ImageState.Error ? (\n        <img\n          css={applyImageCss(objectFit, radius)}\n          alt={alt}\n          src={src}\n          width={width}\n          height={height}\n          onError={(e) => {\n            setImageState(ImageState.Error)\n            if (props.onError != undefined) {\n              props.onError(e)\n            }\n          }}\n          onLoad={(e) => {\n            setImageState(ImageState.Loaded)\n            if (props.onLoad != undefined) {\n              props.onLoad(e)\n            }\n          }}\n          crossOrigin={crossOrigin}\n          decoding={decoding}\n          loading={loading}\n          referrerPolicy={referrerPolicy}\n          sizes={sizes}\n          srcSet={srcSet}\n          useMap={useMap}\n          draggable={draggable}\n        />\n      ) : fallbackSrc && fallbackSrc.length != 0 ? (\n        <img\n          css={applyImageCss(objectFit, radius)}\n          alt={alt}\n          src={fallbackSrc}\n          width={width}\n          height={height}\n          crossOrigin={crossOrigin}\n          decoding={decoding}\n          loading={loading}\n          referrerPolicy={referrerPolicy}\n          sizes={sizes}\n          srcSet={srcSet}\n          useMap={useMap}\n          draggable={draggable}\n        />\n      ) : (\n        <div css={applyDefaultFallback(width, height, radius)}>{fallback}</div>\n      )}\n    </div>\n  )\n})\n\nImage.displayName = \"Image\"\n"],"names":["applyImageCss","objFit","radius","css","applyDefaultFallback","width","height","globalColor","illaPrefix","applyOuterCss","Image","forwardRef","props","ref","src","alt","objectFit","fallback","jsx","ImageDefaultIcon","fallbackSrc","crossOrigin","decoding","loading","referrerPolicy","sizes","srcSet","useMap","draggable","rest","imageState","setImageState","useState","useEffect","applyBoxStyle","deleteCssProps","e"],"mappings":"oOAGgB,SAAAA,EACdC,EACAC,EACA,CACO,OAAAC;AAAA,kBACSF,CAAM;AAAA,qBACHC,CAAM;AAAA,GAE3B,CAEgB,SAAAE,EACdC,EACAC,EACAJ,EACA,CACO,OAAAC;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKeI,EAAY,KAAKC,CAAU,cAAc,CAAC;AAAA,qBAC7CN,CAAM;AAAA,aACdG,CAAK;AAAA,cACJC,CAAM;AAAA,GAEpB,CAEO,MAAMG,EAAgBN;AAAA;AAAA;AAAA,ECbtBO,EAAAC,EAAA,WAAA,CAAAC,EAAAC,IAAA,CACL,KAAA,CAAM,IAAAC,EAAA,GAEE,MAAAT,EAAA,QACE,OAAAC,EAAA,QACC,IAAAS,EAAA,GACH,UAAAC,EAAA,QAEM,SAAAC,EAAAC,EAAAC,EAAA,CAAA,MAAAZ,EAAA,KAAAC,CAAA,gBAAA,EAAA,EAE6D,YAAAY,EAAA,GAE3D,OAAAlB,EAAA,MACL,YAAAmB,EAET,SAAAC,EACA,QAAAC,EACA,eAAAC,EACA,MAAAC,EACA,OAAAC,EACA,OAAAC,EACA,UAAAC,EAAA,GACY,GAAAC,CACT,EAAAjB,EAGL,CAAAkB,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAEAC,OAAAA,EAAAA,UAAA,IAAA,CACEF,EAAA,CAAA,CAAgC,EAAA,CAAAjB,CAAA,CAAA,EAGlCI,EACE,MAAC,CAAA,IAAA,CAAAT,EAAAyB,EAAAtB,CAAA,CAAA,EAC0C,IAAAC,EACzC,GAAAsB,EAAAN,CAAA,EACuB,SAAAf,GAAAA,EAAA,QAAA,GAAAgB,GAAA,EAAAZ,EAGrB,MAAC,CAAA,IAAAlB,EAAAgB,EAAAd,CAAA,EACqC,IAAAa,EACpC,IAAAD,EACA,MAAAT,EACA,OAAAC,EACA,QAAA8B,GAAA,CAEEL,EAAA,CAAA,EACAnB,EAAA,SAAA,MACEA,EAAA,QAAAwB,CAAA,CACF,EACF,OAAAA,GAAA,CAEEL,EAAA,CAAA,EACAnB,EAAA,QAAA,MACEA,EAAA,OAAAwB,CAAA,CACF,EACF,YAAAf,EACA,SAAAC,EACA,QAAAC,EACA,eAAAC,EACA,MAAAC,EACA,OAAAC,EACA,OAAAC,EACA,UAAAC,CACA,CAAA,EAAAR,GAAAA,EAAA,QAAA,EAAAF,EAGF,MAAC,CAAA,IAAAlB,EAAAgB,EAAAd,CAAA,EACqC,IAAAa,EACpC,IAAAK,EACK,MAAAf,EACL,OAAAC,EACA,YAAAe,EACA,SAAAC,EACA,QAAAC,EACA,eAAAC,EACA,MAAAC,EACA,OAAAC,EACA,OAAAC,EACA,UAAAC,CACA,CAAA,EAAAV,EAAA,MAAA,CAAA,IAAAd,EAAAC,EAAAC,EAAAJ,CAAA,EAAA,SAAAe,CAAA,CAAA,CAG+D,CAAA,CAIzE,CAAA,EAEAP,EAAA,YAAA"}