{"version":3,"file":"timeline.stories-f43c08a0.js","sources":["../../../../packages/timeline/src/timeline-context.tsx","../../../../packages/timeline/src/styles.ts","../../../../packages/timeline/src/timelineItem.tsx","../../../../packages/timeline/src/timeline.tsx"],"sourcesContent":["import { createContext } from \"react\"\nimport { TimelineContextProps } from \"./interface\"\n\nexport const TimelineContext = createContext<TimelineContextProps | undefined>(\n  undefined,\n)\n\nTimelineContext.displayName = \"TimelineContext\"\n","import { css, SerializedStyles } from \"@emotion/react\"\nimport { globalColor, illaPrefix } from \"@illa-design/theme\"\nimport {\n  TimelineDirection,\n  TimelineItemLineType,\n  TimelineMode,\n} from \"./interface\"\nimport { ReactNode } from \"react\"\n\nexport function applyWrapStyle(\n  direction: TimelineDirection,\n  mode: TimelineMode,\n): SerializedStyles {\n  return css`\n    display: inline-flex;\n    ${direction === \"vertical\" && \"flex-direction: column\"};\n    ${direction === \"horizontal\" &&\n    mode === \"alternate\" &&\n    css`\n      min-height: 100px;\n      align-items: center;\n    `};\n  `\n}\n\nexport function applyItemStyle(\n  direction: TimelineDirection,\n  mode: string,\n  dot?: ReactNode,\n): SerializedStyles {\n  if (direction === \"horizontal\") {\n    let itemStyle\n    if (mode === \"alternate-same\") {\n      itemStyle = css`\n        margin-top: 16px;\n        padding-bottom: 8px;\n        transform: translateY(-50%);\n      `\n    } else if (mode === \"alternate-relative\") {\n      itemStyle = css`\n        margin-top: -16px;\n        padding-top: 8px;\n        transform: translateY(50%);\n      `\n    } else if (mode === \"bottom\") {\n      itemStyle = css`\n        padding-bottom: 8px;\n      `\n    } else {\n      itemStyle = css`\n        padding-top: 8px;\n      `\n    }\n    return css`\n      ${itemStyle};\n      flex: ${dot ? \"unset\" : \"1\"};\n      position: relative;\n    `\n  }\n  const lastItemStyle = css`\n    &:last-of-type {\n      padding-bottom: ${dot ? \"20px\" : \"0\"};\n    }\n  `\n  return css`\n    position: relative;\n    margin: 0;\n    padding-bottom: 42px;\n    ${lastItemStyle};\n  `\n}\n\nexport function baseLineStyle(lineColor?: string): SerializedStyles {\n  let color = lineColor ? lineColor : globalColor(`--${illaPrefix}-grayBlue-08`)\n  return css`\n    border-color: ${color};\n  `\n}\n\nexport function dotCommonStyle(\n  dotColor?: string,\n  dotType?: string,\n): SerializedStyles {\n  let dotFillColor = dotColor\n    ? dotColor\n    : globalColor(`--${illaPrefix}-blue-03`)\n  let dotFillStyle\n  if (dotType === \"hollow\") {\n    dotFillStyle = css`\n      border: 1px solid ${dotFillColor};\n    `\n  } else {\n    dotFillStyle = css`\n      background-color: ${dotFillColor};\n    `\n  }\n  return css`\n    width: 6px;\n    height: 6px;\n    border-radius: 50%;\n    ${dotFillStyle};\n  `\n}\n\nexport function applyDotItemStyle(\n  direction: TimelineDirection,\n  mode: string,\n): SerializedStyles {\n  const commonDotStyle = css`\n    position: absolute;\n    text-align: center;\n  `\n  if (direction === \"horizontal\") {\n    if (mode === \"bottom\" || mode === \"alternate-same\") {\n      return css`\n        ${commonDotStyle};\n        width: 100%;\n        bottom: 0;\n      `\n    } else {\n      return css`\n        ${commonDotStyle};\n        width: 100%;\n        top: 0;\n      `\n    }\n  } else {\n    if (mode === \"alternate-same\" || mode === \"alternate-relative\") {\n      return css`\n        ${commonDotStyle};\n        height: 100%;\n        left: 50%;\n      `\n    } else if (mode === \"right\") {\n      return css`\n        ${commonDotStyle};\n        height: 100%;\n        right: 0;\n      `\n    } else {\n      return css`\n        ${commonDotStyle};\n        height: 100%;\n        left: 0;\n      `\n    }\n  }\n}\n\nexport function applyLineStyle(\n  direction: TimelineDirection,\n  lineType: TimelineItemLineType,\n  dotColor?: string,\n): SerializedStyles {\n  let dotFillColor = dotColor\n    ? dotColor\n    : globalColor(`--${illaPrefix}-grayBlue-08`)\n  if (direction === \"horizontal\") {\n    return css`\n      box-sizing: border-box;\n      position: absolute;\n      transform: translateY(-50%);\n      top: 50%;\n      bottom: -4px;\n      left: 24px;\n      right: 0;\n      height: 1px;\n      border-top: 1px ${lineType} ${dotFillColor};\n    `\n  }\n  return css`\n    box-sizing: border-box;\n    position: absolute;\n    transform: translateX(-50%);\n    top: 24px;\n    bottom: 0;\n    left: 50%;\n    width: 1px;\n    border-left: 1px ${lineType} ${dotFillColor};\n  `\n}\n\nconst flexCenter = css`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nexport function applyDotWrapperStyle(\n  direction: TimelineDirection,\n): SerializedStyles {\n  if (direction === \"horizontal\") {\n    return css`\n      ${flexCenter};\n      width: 24px;\n      height: 16px;\n      line-height: 6px;\n      position: relative;\n    `\n  }\n  return css`\n    ${flexCenter};\n    width: 6px;\n    height: 24px;\n    line-height: 24px;\n    position: relative;\n  `\n}\n\nexport function applyVertItemContentStyle(mode: string): SerializedStyles {\n  if (mode === \"alternate-same\") {\n    return css`\n      left: 50%;\n      width: 50%;\n      margin-left: 22px;\n      padding-right: 22px;\n    `\n  } else if (mode === \"alternate-relative\") {\n    return css`\n      left: 0;\n      margin-left: -16px;\n      margin-right: 0;\n      text-align: right;\n      width: 50%;\n      padding-right: 16px;\n    `\n  } else if (mode === \"right\") {\n    return css`\n      text-align: right;\n      margin-left: 0;\n      margin-right: 16px;\n    `\n  } else {\n    return css`\n      margin-left: 16px;\n    `\n  }\n}\n\nexport function applyHortItemContentStyle(mode: string): SerializedStyles {\n  if (mode === \"alternate-same\") {\n    return css`\n      margin-bottom: 16px;\n      margin-right: 20px;\n      padding-bottom: unset;\n    `\n  } else if (mode === \"alternate-relative\") {\n    return css`\n      margin-top: 16px;\n      margin-right: 20px;\n    `\n  } else if (mode === \"bottom\") {\n    return css`\n      margin-bottom: 16px;\n      margin-right: 20px;\n      padding-bottom: unset;\n    `\n  } else {\n    return css`\n      margin-top: 16px;\n      margin-right: 20px;\n    `\n  }\n}\n\nexport function applyItemContentStyle(\n  direction: TimelineDirection,\n  mode: string,\n  autoFixDotSize?: boolean,\n): SerializedStyles {\n  let directionStyle\n  if (direction === \"horizontal\") {\n    directionStyle = applyHortItemContentStyle(mode)\n  } else {\n    directionStyle = applyVertItemContentStyle(mode)\n  }\n\n  return css`\n    position: relative;\n    padding-bottom: 2px;\n    ${autoFixDotSize &&\n    css`\n      font-size: 14px;\n      line-height: 22px;\n    `};\n    ${directionStyle};\n  `\n}\n","import { forwardRef } from \"react\"\nimport { TimelineItemProps, TimelineLabelPosition } from \"./interface\"\nimport { TimelineContext } from \"./timeline-context\"\nimport {\n  applyItemStyle,\n  applyDotItemStyle,\n  applyLineStyle,\n  dotCommonStyle,\n  applyDotWrapperStyle,\n  applyItemContentStyle,\n} from \"./styles\"\nimport { applyBoxStyle, deleteCssProps } from \"@illa-design/theme\"\n\nconst modeHandle = (\n  mode: string,\n  key: number,\n  labelPosition: TimelineLabelPosition,\n) => {\n  let classArr = [\"alternate-same\", \"alternate-relative\"]\n  // if labelPosition is relative :  1 -> 0, 0 -> 1\n  let classIdx = Math.abs((key % 2) - (labelPosition === \"relative\" ? 1 : 0))\n  return mode === \"alternate\" ? classArr[classIdx] : mode\n}\n\nexport const TimelineItem = forwardRef<HTMLDivElement, TimelineItemProps>(\n  (props, ref) => {\n    return (\n      <TimelineContext.Consumer>\n        {(value) => {\n          const isChildrenLast = value?.isChildrenLast\n          const {\n            dot,\n            direction = value?.direction || \"vertical\",\n            mode = value?.mode || \"left\",\n            index = value?.index || 0,\n            label,\n            labelPosition = \"same\",\n            dotColor,\n            dotType = \"solid\",\n            lineType = \"solid\",\n            lineColor,\n            autoFixDotSize = true,\n            children,\n            ...rest\n          } = props\n\n          const _mode = modeHandle(mode, index, labelPosition)\n\n          return (\n            <div\n              css={[\n                applyItemStyle(direction, _mode, dot),\n                applyBoxStyle(props),\n              ]}\n              ref={ref}\n              {...deleteCssProps(rest)}\n            >\n              <div css={applyDotItemStyle(direction, _mode)}>\n                {isChildrenLast ? null : (\n                  <div css={applyLineStyle(direction, lineType, lineColor)} />\n                )}\n                <div css={applyDotWrapperStyle(direction)}>\n                  {dot ? dot : <div css={dotCommonStyle(dotColor, dotType)} />}\n                </div>\n              </div>\n              <div\n                css={applyItemContentStyle(direction, _mode, autoFixDotSize)}\n              >\n                {label ? label : children}\n              </div>\n            </div>\n          )\n        }}\n      </TimelineContext.Consumer>\n    )\n  },\n)\n\nTimelineItem.displayName = \"TimelineItem\"\n","import { Children, forwardRef, ReactElement } from \"react\"\nimport { TimelineProps } from \"./interface\"\nimport { Spin } from \"@illa-design/spin\"\nimport { TimelineItem } from \"./timelineItem\"\nimport { TimelineContext } from \"./timeline-context\"\nimport { applyWrapStyle } from \"./styles\"\nimport { css } from \"@emotion/react\"\nimport { applyBoxStyle, deleteCssProps } from \"@illa-design/theme\"\n\nexport const Timeline = forwardRef<HTMLDivElement, TimelineProps>(\n  (props, ref) => {\n    const {\n      reverse,\n      mode = \"left\",\n      direction = \"vertical\",\n      pending,\n      pendingDot = <Spin size={\"small\"} />,\n      children,\n      ...rest\n    } = props\n\n    const items = Children.toArray(children) || []\n\n    if (reverse) items.reverse()\n\n    const pendingNode = typeof pending === \"boolean\" ? null : pending\n    const pendingItem = pending ? (\n      <TimelineItem\n        dot={pendingDot || pendingNode}\n        mode={mode}\n        direction={direction}\n        key={items.length}\n      />\n    ) : null\n    pending && items.push(pendingItem as ReactElement)\n\n    return (\n      <div\n        ref={ref}\n        css={css(applyWrapStyle(direction, mode), applyBoxStyle(props))}\n        {...deleteCssProps(rest)}\n      >\n        {items.map((child, index) => {\n          if (!child) {\n            return null\n          }\n          return (\n            <TimelineContext.Provider\n              key={index}\n              value={{\n                direction,\n                mode,\n                index,\n                isChildrenLast: items.length - 1 === index,\n              }}\n            >\n              {child}\n            </TimelineContext.Provider>\n          )\n        })}\n      </div>\n    )\n  },\n)\n\nTimeline.displayName = \"Timeline\"\n"],"names":["TimelineContext","createContext","applyWrapStyle","direction","mode","css","applyItemStyle","dot","itemStyle","lastItemStyle","dotCommonStyle","dotColor","dotType","dotFillColor","globalColor","illaPrefix","dotFillStyle","applyDotItemStyle","commonDotStyle","applyLineStyle","lineType","flexCenter","applyDotWrapperStyle","applyVertItemContentStyle","applyHortItemContentStyle","applyItemContentStyle","autoFixDotSize","directionStyle","modeHandle","key","labelPosition","classArr","classIdx","TimelineItem","forwardRef","props","ref","jsx","value","isChildrenLast","index","label","lineColor","children","rest","_mode","jsxs","applyBoxStyle","deleteCssProps","Timeline","reverse","pending","pendingDot","Spin","items","Children","pendingItem","child"],"mappings":"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"}